function cov_e8mvu7vrp(){var path="/home/programmer/arkademy/minggu1/ninja-library-app/src/models/books.js";var hash="619cd4fa1c3d04b6eb5003125d11fff321f530c5";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/programmer/arkademy/minggu1/ninja-library-app/src/models/books.js",statementMap:{"0":{start:{line:1,column:19},end:{line:1,column:45}},"1":{start:{line:3,column:0},end:{line:133,column:2}},"2":{start:{line:5,column:8},end:{line:10,column:8}},"3":{start:{line:6,column:10},end:{line:9,column:12}},"4":{start:{line:7,column:14},end:{line:7,column:49}},"5":{start:{line:7,column:25},end:{line:7,column:49}},"6":{start:{line:8,column:18},end:{line:8,column:46}},"7":{start:{line:14,column:8},end:{line:29,column:8}},"8":{start:{line:15,column:26},end:{line:15,column:73}},"9":{start:{line:19,column:23},end:{line:19,column:84}},"10":{start:{line:21,column:8},end:{line:28,column:10}},"11":{start:{line:26,column:12},end:{line:26,column:47}},"12":{start:{line:26,column:23},end:{line:26,column:47}},"13":{start:{line:27,column:16},end:{line:27,column:31}},"14":{start:{line:33,column:8},end:{line:41,column:10}},"15":{start:{line:34,column:12},end:{line:40,column:14}},"16":{start:{line:35,column:16},end:{line:39,column:17}},"17":{start:{line:36,column:20},end:{line:36,column:35}},"18":{start:{line:38,column:20},end:{line:38,column:44}},"19":{start:{line:45,column:6},end:{line:52,column:8}},"20":{start:{line:46,column:10},end:{line:51,column:10}},"21":{start:{line:49,column:10},end:{line:49,column:45}},"22":{start:{line:49,column:21},end:{line:49,column:45}},"23":{start:{line:50,column:12},end:{line:50,column:27}},"24":{start:{line:56,column:6},end:{line:61,column:8}},"25":{start:{line:57,column:8},end:{line:60,column:10}},"26":{start:{line:58,column:10},end:{line:58,column:45}},"27":{start:{line:58,column:21},end:{line:58,column:45}},"28":{start:{line:59,column:12},end:{line:59,column:27}},"29":{start:{line:65,column:8},end:{line:73,column:10}},"30":{start:{line:66,column:12},end:{line:72,column:14}},"31":{start:{line:67,column:16},end:{line:71,column:17}},"32":{start:{line:68,column:20},end:{line:68,column:35}},"33":{start:{line:70,column:20},end:{line:70,column:44}},"34":{start:{line:77,column:8},end:{line:82,column:8}},"35":{start:{line:78,column:8},end:{line:81,column:10}},"36":{start:{line:79,column:10},end:{line:79,column:45}},"37":{start:{line:79,column:21},end:{line:79,column:45}},"38":{start:{line:80,column:12},end:{line:80,column:27}},"39":{start:{line:86,column:7},end:{line:91,column:8}},"40":{start:{line:87,column:8},end:{line:90,column:10}},"41":{start:{line:88,column:10},end:{line:88,column:45}},"42":{start:{line:88,column:21},end:{line:88,column:45}},"43":{start:{line:89,column:12},end:{line:89,column:27}},"44":{start:{line:95,column:6},end:{line:100,column:8}},"45":{start:{line:96,column:8},end:{line:99,column:10}},"46":{start:{line:97,column:10},end:{line:97,column:45}},"47":{start:{line:97,column:21},end:{line:97,column:45}},"48":{start:{line:98,column:12},end:{line:98,column:27}},"49":{start:{line:105,column:6},end:{line:110,column:8}},"50":{start:{line:106,column:8},end:{line:109,column:10}},"51":{start:{line:107,column:10},end:{line:107,column:45}},"52":{start:{line:107,column:21},end:{line:107,column:45}},"53":{start:{line:108,column:12},end:{line:108,column:27}},"54":{start:{line:114,column:6},end:{line:119,column:8}},"55":{start:{line:115,column:10},end:{line:118,column:10}},"56":{start:{line:116,column:10},end:{line:116,column:45}},"57":{start:{line:116,column:21},end:{line:116,column:45}},"58":{start:{line:117,column:12},end:{line:117,column:27}},"59":{start:{line:124,column:6},end:{line:129,column:8}},"60":{start:{line:125,column:8},end:{line:128,column:10}},"61":{start:{line:126,column:10},end:{line:126,column:45}},"62":{start:{line:126,column:21},end:{line:126,column:45}},"63":{start:{line:127,column:12},end:{line:127,column:27}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:15},end:{line:4,column:16}},loc:{start:{line:4,column:32},end:{line:11,column:5}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:5,column:27},end:{line:5,column:28}},loc:{start:{line:5,column:48},end:{line:10,column:7}},line:5},"2":{name:"(anonymous_2)",decl:{start:{line:6,column:106},end:{line:6,column:107}},loc:{start:{line:6,column:125},end:{line:9,column:11}},line:6},"3":{name:"(anonymous_3)",decl:{start:{line:13,column:17},end:{line:13,column:18}},loc:{start:{line:13,column:46},end:{line:30,column:5}},line:13},"4":{name:"(anonymous_4)",decl:{start:{line:14,column:27},end:{line:14,column:28}},loc:{start:{line:14,column:48},end:{line:29,column:7}},line:14},"5":{name:"(anonymous_5)",decl:{start:{line:25,column:10},end:{line:25,column:11}},loc:{start:{line:25,column:29},end:{line:28,column:9}},line:25},"6":{name:"(anonymous_6)",decl:{start:{line:32,column:21},end:{line:32,column:22}},loc:{start:{line:32,column:35},end:{line:42,column:5}},line:32},"7":{name:"(anonymous_7)",decl:{start:{line:33,column:27},end:{line:33,column:28}},loc:{start:{line:33,column:54},end:{line:41,column:9}},line:33},"8":{name:"(anonymous_8)",decl:{start:{line:34,column:300},end:{line:34,column:301}},loc:{start:{line:34,column:325},end:{line:40,column:13}},line:34},"9":{name:"(anonymous_9)",decl:{start:{line:44,column:16},end:{line:44,column:17}},loc:{start:{line:44,column:26},end:{line:53,column:5}},line:44},"10":{name:"(anonymous_10)",decl:{start:{line:45,column:25},end:{line:45,column:26}},loc:{start:{line:45,column:46},end:{line:52,column:7}},line:45},"11":{name:"(anonymous_11)",decl:{start:{line:46,column:60},end:{line:46,column:61}},loc:{start:{line:46,column:79},end:{line:51,column:9}},line:46},"12":{name:"(anonymous_12)",decl:{start:{line:55,column:18},end:{line:55,column:19}},loc:{start:{line:55,column:32},end:{line:62,column:5}},line:55},"13":{name:"(anonymous_13)",decl:{start:{line:56,column:25},end:{line:56,column:26}},loc:{start:{line:56,column:46},end:{line:61,column:7}},line:56},"14":{name:"(anonymous_14)",decl:{start:{line:57,column:72},end:{line:57,column:73}},loc:{start:{line:57,column:91},end:{line:60,column:9}},line:57},"15":{name:"(anonymous_15)",decl:{start:{line:64,column:23},end:{line:64,column:24}},loc:{start:{line:64,column:37},end:{line:74,column:5}},line:64},"16":{name:"(anonymous_16)",decl:{start:{line:65,column:27},end:{line:65,column:28}},loc:{start:{line:65,column:54},end:{line:73,column:9}},line:65},"17":{name:"(anonymous_17)",decl:{start:{line:66,column:129},end:{line:66,column:130}},loc:{start:{line:66,column:154},end:{line:72,column:13}},line:66},"18":{name:"(anonymous_18)",decl:{start:{line:76,column:27},end:{line:76,column:28}},loc:{start:{line:76,column:35},end:{line:83,column:5}},line:76},"19":{name:"(anonymous_19)",decl:{start:{line:77,column:27},end:{line:77,column:28}},loc:{start:{line:77,column:48},end:{line:82,column:7}},line:77},"20":{name:"(anonymous_20)",decl:{start:{line:78,column:115},end:{line:78,column:116}},loc:{start:{line:78,column:134},end:{line:81,column:9}},line:78},"21":{name:"(anonymous_21)",decl:{start:{line:85,column:28},end:{line:85,column:29}},loc:{start:{line:85,column:41},end:{line:92,column:5}},line:85},"22":{name:"(anonymous_22)",decl:{start:{line:86,column:26},end:{line:86,column:27}},loc:{start:{line:86,column:47},end:{line:91,column:7}},line:86},"23":{name:"(anonymous_23)",decl:{start:{line:87,column:83},end:{line:87,column:84}},loc:{start:{line:87,column:102},end:{line:90,column:9}},line:87},"24":{name:"(anonymous_24)",decl:{start:{line:94,column:21},end:{line:94,column:22}},loc:{start:{line:94,column:29},end:{line:101,column:5}},line:94},"25":{name:"(anonymous_25)",decl:{start:{line:95,column:25},end:{line:95,column:26}},loc:{start:{line:95,column:46},end:{line:100,column:7}},line:95},"26":{name:"(anonymous_26)",decl:{start:{line:96,column:78},end:{line:96,column:79}},loc:{start:{line:96,column:97},end:{line:99,column:9}},line:96},"27":{name:"(anonymous_27)",decl:{start:{line:104,column:21},end:{line:104,column:22}},loc:{start:{line:104,column:29},end:{line:111,column:5}},line:104},"28":{name:"(anonymous_28)",decl:{start:{line:105,column:25},end:{line:105,column:26}},loc:{start:{line:105,column:46},end:{line:110,column:7}},line:105},"29":{name:"(anonymous_29)",decl:{start:{line:106,column:78},end:{line:106,column:79}},loc:{start:{line:106,column:97},end:{line:109,column:9}},line:106},"30":{name:"(anonymous_30)",decl:{start:{line:113,column:19},end:{line:113,column:20}},loc:{start:{line:113,column:29},end:{line:120,column:5}},line:113},"31":{name:"(anonymous_31)",decl:{start:{line:114,column:25},end:{line:114,column:26}},loc:{start:{line:114,column:46},end:{line:119,column:7}},line:114},"32":{name:"(anonymous_32)",decl:{start:{line:115,column:62},end:{line:115,column:63}},loc:{start:{line:115,column:81},end:{line:118,column:9}},line:115},"33":{name:"(anonymous_33)",decl:{start:{line:123,column:20},end:{line:123,column:21}},loc:{start:{line:123,column:28},end:{line:130,column:5}},line:123},"34":{name:"(anonymous_34)",decl:{start:{line:124,column:25},end:{line:124,column:26}},loc:{start:{line:124,column:46},end:{line:129,column:7}},line:124},"35":{name:"(anonymous_35)",decl:{start:{line:125,column:63},end:{line:125,column:64}},loc:{start:{line:125,column:82},end:{line:128,column:9}},line:125}},branchMap:{"0":{loc:{start:{line:7,column:14},end:{line:7,column:49}},type:"if",locations:[{start:{line:7,column:14},end:{line:7,column:49}},{start:{line:7,column:14},end:{line:7,column:49}}],line:7},"1":{loc:{start:{line:26,column:12},end:{line:26,column:47}},type:"if",locations:[{start:{line:26,column:12},end:{line:26,column:47}},{start:{line:26,column:12},end:{line:26,column:47}}],line:26},"2":{loc:{start:{line:35,column:16},end:{line:39,column:17}},type:"if",locations:[{start:{line:35,column:16},end:{line:39,column:17}},{start:{line:35,column:16},end:{line:39,column:17}}],line:35},"3":{loc:{start:{line:49,column:10},end:{line:49,column:45}},type:"if",locations:[{start:{line:49,column:10},end:{line:49,column:45}},{start:{line:49,column:10},end:{line:49,column:45}}],line:49},"4":{loc:{start:{line:58,column:10},end:{line:58,column:45}},type:"if",locations:[{start:{line:58,column:10},end:{line:58,column:45}},{start:{line:58,column:10},end:{line:58,column:45}}],line:58},"5":{loc:{start:{line:67,column:16},end:{line:71,column:17}},type:"if",locations:[{start:{line:67,column:16},end:{line:71,column:17}},{start:{line:67,column:16},end:{line:71,column:17}}],line:67},"6":{loc:{start:{line:79,column:10},end:{line:79,column:45}},type:"if",locations:[{start:{line:79,column:10},end:{line:79,column:45}},{start:{line:79,column:10},end:{line:79,column:45}}],line:79},"7":{loc:{start:{line:88,column:10},end:{line:88,column:45}},type:"if",locations:[{start:{line:88,column:10},end:{line:88,column:45}},{start:{line:88,column:10},end:{line:88,column:45}}],line:88},"8":{loc:{start:{line:97,column:10},end:{line:97,column:45}},type:"if",locations:[{start:{line:97,column:10},end:{line:97,column:45}},{start:{line:97,column:10},end:{line:97,column:45}}],line:97},"9":{loc:{start:{line:107,column:10},end:{line:107,column:45}},type:"if",locations:[{start:{line:107,column:10},end:{line:107,column:45}},{start:{line:107,column:10},end:{line:107,column:45}}],line:107},"10":{loc:{start:{line:116,column:10},end:{line:116,column:45}},type:"if",locations:[{start:{line:116,column:10},end:{line:116,column:45}},{start:{line:116,column:10},end:{line:116,column:45}}],line:116},"11":{loc:{start:{line:126,column:10},end:{line:126,column:45}},type:"if",locations:[{start:{line:126,column:10},end:{line:126,column:45}},{start:{line:126,column:10},end:{line:126,column:45}}],line:126}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"619cd4fa1c3d04b6eb5003125d11fff321f530c5"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_e8mvu7vrp=function(){return actualCoverage;};}return actualCoverage;}cov_e8mvu7vrp();const connection=(cov_e8mvu7vrp().s[0]++,require('../config/mysql'));cov_e8mvu7vrp().s[1]++;module.exports={countData:searchTitle=>{cov_e8mvu7vrp().f[0]++;cov_e8mvu7vrp().s[2]++;return new Promise((resolve,reject)=>{cov_e8mvu7vrp().f[1]++;cov_e8mvu7vrp().s[3]++;connection.query(`SELECT count(*) as totalData FROM books WHERE title LIKE '%${searchTitle}%'`,(error,result)=>{cov_e8mvu7vrp().f[2]++;cov_e8mvu7vrp().s[4]++;if(error){cov_e8mvu7vrp().b[0][0]++;cov_e8mvu7vrp().s[5]++;reject(new Error(error));}else{cov_e8mvu7vrp().b[0][1]++;}cov_e8mvu7vrp().s[6]++;resolve(result[0].totalData);});});},getAllBooks:(searchTitle,pagination)=>{cov_e8mvu7vrp().f[3]++;cov_e8mvu7vrp().s[7]++;return new Promise((resolve,reject)=>{cov_e8mvu7vrp().f[4]++;const totalData=(cov_e8mvu7vrp().s[8]++,connection.query('SELECT count (*) FROM books'));// const totalPages = Math.ceil(totalData / limit)
// const firstData = ((limit * activePage) - limit)
const firstData=(cov_e8mvu7vrp().s[9]++,pagination.limit*pagination.activePage-pagination.limit);cov_e8mvu7vrp().s[10]++;connection.query(`SELECT b.id, b.title, b.image, g.name as author, a.name as genre, s.name as statusbook FROM books b INNER JOIN authors g ON b.author = g.id INNER JOIN genres a ON b.genre = a.id INNER JOIN statusbook s ON b.status = s.id
          WHERE title LIKE '%${searchTitle}%'
          ORDER BY ${pagination.sortBy}
          LIMIT ${firstData},${pagination.limit}`,(error,result)=>{cov_e8mvu7vrp().f[5]++;cov_e8mvu7vrp().s[11]++;if(error){cov_e8mvu7vrp().b[1][0]++;cov_e8mvu7vrp().s[12]++;reject(new Error(error));}else{cov_e8mvu7vrp().b[1][1]++;}cov_e8mvu7vrp().s[13]++;resolve(result);});});},getBookDataByID:function(id){cov_e8mvu7vrp().f[6]++;cov_e8mvu7vrp().s[14]++;return new Promise(function(resolve,reject){cov_e8mvu7vrp().f[7]++;cov_e8mvu7vrp().s[15]++;connection.query('SELECT b.id, b.title, b.description, b.image, b.status, g.name as author, a.name as genre, s.name as statusbook FROM books b INNER JOIN authors g ON b.author = g.id INNER JOIN genres a ON b.genre = a.id INNER JOIN statusbook s ON b.status = s.id  WHERE b.id = ?',[id],function(error,result){cov_e8mvu7vrp().f[8]++;cov_e8mvu7vrp().s[16]++;if(!error){cov_e8mvu7vrp().b[2][0]++;cov_e8mvu7vrp().s[17]++;resolve(result);}else{cov_e8mvu7vrp().b[2][1]++;cov_e8mvu7vrp().s[18]++;reject(new Error(error));}});});},addNewBook:data=>{cov_e8mvu7vrp().f[9]++;cov_e8mvu7vrp().s[19]++;return new Promise((resolve,reject)=>{cov_e8mvu7vrp().f[10]++;cov_e8mvu7vrp().s[20]++;connection.query('INSERT INTO books SET ?',data,(error,result)=>{cov_e8mvu7vrp().f[11]++;cov_e8mvu7vrp().s[21]++;// connection.query('INSERT INTO products SET ?', data)
// connection.query('SELECT products.id, products.name, products.description, products.image, products.price, products.stock, category.name FROM products LEFT JOIN category ON products.id_category = category.id', (error, result) => {
if(error){cov_e8mvu7vrp().b[3][0]++;cov_e8mvu7vrp().s[22]++;reject(new Error(error));}else{cov_e8mvu7vrp().b[3][1]++;}cov_e8mvu7vrp().s[23]++;resolve(result);});});},editBookData:(data,id)=>{cov_e8mvu7vrp().f[12]++;cov_e8mvu7vrp().s[24]++;return new Promise((resolve,reject)=>{cov_e8mvu7vrp().f[13]++;cov_e8mvu7vrp().s[25]++;connection.query('UPDATE books SET ? WHERE id = ?',[data,id],(error,result)=>{cov_e8mvu7vrp().f[14]++;cov_e8mvu7vrp().s[26]++;if(error){cov_e8mvu7vrp().b[4][0]++;cov_e8mvu7vrp().s[27]++;reject(new Error(error));}else{cov_e8mvu7vrp().b[4][1]++;}cov_e8mvu7vrp().s[28]++;resolve(result);});});},getAllBorrowBook:function(id){cov_e8mvu7vrp().f[15]++;cov_e8mvu7vrp().s[29]++;return new Promise(function(resolve,reject){cov_e8mvu7vrp().f[16]++;cov_e8mvu7vrp().s[30]++;connection.query('SELECT * FROM borrows  INNER JOIN books ON borrows.books_id = books.id WHERE id_borrow = ?',[id],function(error,result){cov_e8mvu7vrp().f[17]++;cov_e8mvu7vrp().s[31]++;if(!error){cov_e8mvu7vrp().b[5][0]++;cov_e8mvu7vrp().s[32]++;resolve(result);}else{cov_e8mvu7vrp().b[5][1]++;cov_e8mvu7vrp().s[33]++;reject(new Error(error));}});});},borrowHistoryBookData:id=>{cov_e8mvu7vrp().f[18]++;cov_e8mvu7vrp().s[34]++;return new Promise((resolve,reject)=>{cov_e8mvu7vrp().f[19]++;cov_e8mvu7vrp().s[35]++;connection.query('UPDATE borrows SET status = ?, updated_at = ? WHERE id_borrow = ?',[2,new Date(),id],(error,result)=>{cov_e8mvu7vrp().f[20]++;cov_e8mvu7vrp().s[36]++;if(error){cov_e8mvu7vrp().b[6][0]++;cov_e8mvu7vrp().s[37]++;reject(new Error(error));}else{cov_e8mvu7vrp().b[6][1]++;}cov_e8mvu7vrp().s[38]++;resolve(result);});});},borrowHistoryBookData1:id_book=>{cov_e8mvu7vrp().f[21]++;cov_e8mvu7vrp().s[39]++;return new Promise((resolve,reject)=>{cov_e8mvu7vrp().f[22]++;cov_e8mvu7vrp().s[40]++;connection.query('UPDATE books SET status = ? WHERE id = ?',[2,id_book],(error,result)=>{cov_e8mvu7vrp().f[23]++;cov_e8mvu7vrp().s[41]++;if(error){cov_e8mvu7vrp().b[7][0]++;cov_e8mvu7vrp().s[42]++;reject(new Error(error));}else{cov_e8mvu7vrp().b[7][1]++;}cov_e8mvu7vrp().s[43]++;resolve(result);});});},borrowBookData:id=>{cov_e8mvu7vrp().f[24]++;cov_e8mvu7vrp().s[44]++;return new Promise((resolve,reject)=>{cov_e8mvu7vrp().f[25]++;cov_e8mvu7vrp().s[45]++;connection.query('UPDATE books SET status = ? WHERE id = ?',[1,id],(error,result)=>{cov_e8mvu7vrp().f[26]++;cov_e8mvu7vrp().s[46]++;if(error){cov_e8mvu7vrp().b[8][0]++;cov_e8mvu7vrp().s[47]++;reject(new Error(error));}else{cov_e8mvu7vrp().b[8][1]++;}cov_e8mvu7vrp().s[48]++;resolve(result);});});},returnBookData:id=>{cov_e8mvu7vrp().f[27]++;cov_e8mvu7vrp().s[49]++;return new Promise((resolve,reject)=>{cov_e8mvu7vrp().f[28]++;cov_e8mvu7vrp().s[50]++;connection.query('UPDATE books SET status = ? WHERE id = ?',[2,id],(error,result)=>{cov_e8mvu7vrp().f[29]++;cov_e8mvu7vrp().s[51]++;if(error){cov_e8mvu7vrp().b[9][0]++;cov_e8mvu7vrp().s[52]++;reject(new Error(error));}else{cov_e8mvu7vrp().b[9][1]++;}cov_e8mvu7vrp().s[53]++;resolve(result);});});},addBorrowBook:data=>{cov_e8mvu7vrp().f[30]++;cov_e8mvu7vrp().s[54]++;return new Promise((resolve,reject)=>{cov_e8mvu7vrp().f[31]++;cov_e8mvu7vrp().s[55]++;connection.query('INSERT INTO borrows SET ?',data,(error,result)=>{cov_e8mvu7vrp().f[32]++;cov_e8mvu7vrp().s[56]++;if(error){cov_e8mvu7vrp().b[10][0]++;cov_e8mvu7vrp().s[57]++;reject(new Error(error));}else{cov_e8mvu7vrp().b[10][1]++;}cov_e8mvu7vrp().s[58]++;resolve(result);});});},deleteBookData:id=>{cov_e8mvu7vrp().f[33]++;cov_e8mvu7vrp().s[59]++;return new Promise((resolve,reject)=>{cov_e8mvu7vrp().f[34]++;cov_e8mvu7vrp().s[60]++;connection.query('DELETE FROM books WHERE id = ?',id,(error,result)=>{cov_e8mvu7vrp().f[35]++;cov_e8mvu7vrp().s[61]++;if(error){cov_e8mvu7vrp().b[11][0]++;cov_e8mvu7vrp().s[62]++;reject(new Error(error));}else{cov_e8mvu7vrp().b[11][1]++;}cov_e8mvu7vrp().s[63]++;resolve(result);});});}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2tzLmpzIl0sIm5hbWVzIjpbImNvbm5lY3Rpb24iLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsImNvdW50RGF0YSIsInNlYXJjaFRpdGxlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJxdWVyeSIsImVycm9yIiwicmVzdWx0IiwiRXJyb3IiLCJ0b3RhbERhdGEiLCJnZXRBbGxCb29rcyIsInBhZ2luYXRpb24iLCJmaXJzdERhdGEiLCJsaW1pdCIsImFjdGl2ZVBhZ2UiLCJzb3J0QnkiLCJnZXRCb29rRGF0YUJ5SUQiLCJpZCIsImFkZE5ld0Jvb2siLCJkYXRhIiwiZWRpdEJvb2tEYXRhIiwiZ2V0QWxsQm9ycm93Qm9vayIsImJvcnJvd0hpc3RvcnlCb29rRGF0YSIsIkRhdGUiLCJib3Jyb3dIaXN0b3J5Qm9va0RhdGExIiwiaWRfYm9vayIsImJvcnJvd0Jvb2tEYXRhIiwicmV0dXJuQm9va0RhdGEiLCJhZGRCb3Jyb3dCb29rIiwiZGVsZXRlQm9va0RhdGEiXSwibWFwcGluZ3MiOiJzaFpBZVk7eUZBZlosS0FBTUEsQ0FBQUEsVUFBVSx5QkFBR0MsT0FBTyxDQUFDLGlCQUFELENBQVYsQ0FBaEIsQyx1QkFFQUMsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQ2JDLFNBQVMsQ0FBR0MsV0FBRCxFQUFpQiwrQ0FDeEIsTUFBTyxJQUFJQyxDQUFBQSxPQUFKLENBQVksQ0FBQ0MsT0FBRCxDQUFVQyxNQUFWLEdBQXFCLCtDQUN0Q1IsVUFBVSxDQUFDUyxLQUFYLENBQWtCLDhEQUE2REosV0FBWSxJQUEzRixDQUFnRyxDQUFDSyxLQUFELENBQVFDLE1BQVIsR0FBbUIsK0NBQy9HLEdBQUlELEtBQUosQ0FBVyxrREFBQUYsTUFBTSxDQUFDLEdBQUlJLENBQUFBLEtBQUosQ0FBVUYsS0FBVixDQUFELENBQU4sQ0FBd0IsQ0FBbkMsZ0NBRCtHLHVCQUUzR0gsT0FBTyxDQUFDSSxNQUFNLENBQUMsQ0FBRCxDQUFOLENBQVVFLFNBQVgsQ0FBUCxD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QUNDLE9BQUQsQ0FBVUMsTUFBVixHQUFxQixpREFDcENSLFVBQVUsQ0FBQ1MsS0FBWCxDQUFpQiwyQkFBakIsQ0FBOENjLElBQTlDLENBQW9ELENBQUNiLEtBQUQsQ0FBUUMsTUFBUixHQUFtQixpREFDdkUsR0FBSUQsS0FBSixDQUFXLG9EQUFBRixNQUFNLENBQUMsR0FBSUksQ0FBQUEsS0FBSixDQUFVRixLQUFWLENBQUQsQ0FBTixDQUF3QixDQUFuQyxpQ0FEdUUsd0JBRXJFSCxPQUFPLENBQUNJLE1BQUQsQ0FBUCxDQUNILENBSEMsRUFJSCxDQUxNLENBQVAsQ0FNRCxDQXJIWSxDQXdIYnNCLGNBQWMsQ0FBR1osRUFBRCxFQUFRLGlEQUN0QixNQUFPLElBQUlmLENBQUFBLE9BQUosQ0FBWSxDQUFDQyxPQUFELENBQVVDLE1BQVYsR0FBcUIsaURBQ3RDUixVQUFVLENBQUNTLEtBQVgsQ0FBaUIsZ0NBQWpCLENBQW1EWSxFQUFuRCxDQUF1RCxDQUFDWCxLQUFELENBQVFDLE1BQVIsR0FBbUIsaURBQ3hFLEdBQUlELEtBQUosQ0FBVyxvREFBQUYsTUFBTSxDQUFDLEdBQUlJLENBQUFBLEtBQUosQ0FBVUYsS0FBVixDQUFELENBQU4sQ0FBd0IsQ0FBbkMsaUNBRHdFLHdCQUV0RUgsT0FBTyxDQUFDSSxNQUFELENBQVAsQ0FDSCxDQUhELEVBSUQsQ0FMTSxDQUFQLENBTUQsQ0EvSFksQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb25uZWN0aW9uID0gcmVxdWlyZSgnLi4vY29uZmlnL215c3FsJylcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgY291bnREYXRhOiAoc2VhcmNoVGl0bGUpID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBjb25uZWN0aW9uLnF1ZXJ5KGBTRUxFQ1QgY291bnQoKikgYXMgdG90YWxEYXRhIEZST00gYm9va3MgV0hFUkUgdGl0bGUgTElLRSAnJSR7c2VhcmNoVGl0bGV9JSdgLCAoZXJyb3IsIHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoZXJyb3IpIHJlamVjdChuZXcgRXJyb3IoZXJyb3IpKVxuICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHRbMF0udG90YWxEYXRhKVxuICAgICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0sXG5cbiAgICBnZXRBbGxCb29rczogKHNlYXJjaFRpdGxlLCBwYWdpbmF0aW9uKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHRvdGFsRGF0YSA9IGNvbm5lY3Rpb24ucXVlcnkoJ1NFTEVDVCBjb3VudCAoKikgRlJPTSBib29rcycpXG4gICAgLy8gY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbCh0b3RhbERhdGEgLyBsaW1pdClcbiAgICAvLyBjb25zdCBmaXJzdERhdGEgPSAoKGxpbWl0ICogYWN0aXZlUGFnZSkgLSBsaW1pdClcblxuICAgIGNvbnN0IGZpcnN0RGF0YSA9ICgocGFnaW5hdGlvbi5saW1pdCAqIHBhZ2luYXRpb24uYWN0aXZlUGFnZSkgLSBwYWdpbmF0aW9uLmxpbWl0KVxuXG4gICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoYFNFTEVDVCBiLmlkLCBiLnRpdGxlLCBiLmltYWdlLCBnLm5hbWUgYXMgYXV0aG9yLCBhLm5hbWUgYXMgZ2VucmUsIHMubmFtZSBhcyBzdGF0dXNib29rIEZST00gYm9va3MgYiBJTk5FUiBKT0lOIGF1dGhvcnMgZyBPTiBiLmF1dGhvciA9IGcuaWQgSU5ORVIgSk9JTiBnZW5yZXMgYSBPTiBiLmdlbnJlID0gYS5pZCBJTk5FUiBKT0lOIHN0YXR1c2Jvb2sgcyBPTiBiLnN0YXR1cyA9IHMuaWRcbiAgICAgICAgICBXSEVSRSB0aXRsZSBMSUtFICclJHtzZWFyY2hUaXRsZX0lJ1xuICAgICAgICAgIE9SREVSIEJZICR7cGFnaW5hdGlvbi5zb3J0Qnl9XG4gICAgICAgICAgTElNSVQgJHtmaXJzdERhdGF9LCR7cGFnaW5hdGlvbi5saW1pdH1gLFxuICAgICAgICAgIChlcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHJlamVjdChuZXcgRXJyb3IoZXJyb3IpKVxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9LFxuXG4gICAgZ2V0Qm9va0RhdGFCeUlEOiBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoJ1NFTEVDVCBiLmlkLCBiLnRpdGxlLCBiLmRlc2NyaXB0aW9uLCBiLmltYWdlLCBiLnN0YXR1cywgZy5uYW1lIGFzIGF1dGhvciwgYS5uYW1lIGFzIGdlbnJlLCBzLm5hbWUgYXMgc3RhdHVzYm9vayBGUk9NIGJvb2tzIGIgSU5ORVIgSk9JTiBhdXRob3JzIGcgT04gYi5hdXRob3IgPSBnLmlkIElOTkVSIEpPSU4gZ2VucmVzIGEgT04gYi5nZW5yZSA9IGEuaWQgSU5ORVIgSk9JTiBzdGF0dXNib29rIHMgT04gYi5zdGF0dXMgPSBzLmlkICBXSEVSRSBiLmlkID0gPycsIFtpZF0sIGZ1bmN0aW9uIChlcnJvciwgcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdClcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKGVycm9yKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH0sXG5cbiAgICBhZGROZXdCb29rOiAoZGF0YSkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBjb25uZWN0aW9uLnF1ZXJ5KCdJTlNFUlQgSU5UTyBib29rcyBTRVQgPycsIGRhdGEsIChlcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgICAgIC8vIGNvbm5lY3Rpb24ucXVlcnkoJ0lOU0VSVCBJTlRPIHByb2R1Y3RzIFNFVCA/JywgZGF0YSlcbiAgICAgICAgLy8gY29ubmVjdGlvbi5xdWVyeSgnU0VMRUNUIHByb2R1Y3RzLmlkLCBwcm9kdWN0cy5uYW1lLCBwcm9kdWN0cy5kZXNjcmlwdGlvbiwgcHJvZHVjdHMuaW1hZ2UsIHByb2R1Y3RzLnByaWNlLCBwcm9kdWN0cy5zdG9jaywgY2F0ZWdvcnkubmFtZSBGUk9NIHByb2R1Y3RzIExFRlQgSk9JTiBjYXRlZ29yeSBPTiBwcm9kdWN0cy5pZF9jYXRlZ29yeSA9IGNhdGVnb3J5LmlkJywgKGVycm9yLCByZXN1bHQpID0+IHtcbiAgICAgICAgICBpZiAoZXJyb3IpIHJlamVjdChuZXcgRXJyb3IoZXJyb3IpKVxuICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0sXG5cbiAgICBlZGl0Qm9va0RhdGE6IChkYXRhLCBpZCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29ubmVjdGlvbi5xdWVyeSgnVVBEQVRFIGJvb2tzIFNFVCA/IFdIRVJFIGlkID0gPycsIFtkYXRhLCBpZF0sIChlcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgaWYgKGVycm9yKSByZWplY3QobmV3IEVycm9yKGVycm9yKSlcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9LFxuXG4gICAgIGdldEFsbEJvcnJvd0Jvb2s6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgY29ubmVjdGlvbi5xdWVyeSgnU0VMRUNUICogRlJPTSBib3Jyb3dzICBJTk5FUiBKT0lOIGJvb2tzIE9OIGJvcnJvd3MuYm9va3NfaWQgPSBib29rcy5pZCBXSEVSRSBpZF9ib3Jyb3cgPSA/JywgW2lkXSwgZnVuY3Rpb24gKGVycm9yLCByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoZXJyb3IpKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfSxcblxuICAgIGJvcnJvd0hpc3RvcnlCb29rRGF0YTogKGlkKSA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoJ1VQREFURSBib3Jyb3dzIFNFVCBzdGF0dXMgPSA/LCB1cGRhdGVkX2F0ID0gPyBXSEVSRSBpZF9ib3Jyb3cgPSA/JywgWzIsIG5ldyBEYXRlKCksIGlkXSwgKGVycm9yLCByZXN1bHQpID0+IHtcbiAgICAgICAgICBpZiAoZXJyb3IpIHJlamVjdChuZXcgRXJyb3IoZXJyb3IpKVxuICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH0sXG5cbiAgICBib3Jyb3dIaXN0b3J5Qm9va0RhdGExOiAoaWRfYm9vaykgPT4ge1xuICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoJ1VQREFURSBib29rcyBTRVQgc3RhdHVzID0gPyBXSEVSRSBpZCA9ID8nLCBbMiwgaWRfYm9va10sIChlcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgaWYgKGVycm9yKSByZWplY3QobmV3IEVycm9yKGVycm9yKSlcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9LFxuXG4gICAgIGJvcnJvd0Jvb2tEYXRhOiAoaWQpID0+IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoJ1VQREFURSBib29rcyBTRVQgc3RhdHVzID0gPyBXSEVSRSBpZCA9ID8nLCBbMSwgaWRdLCAoZXJyb3IsIHJlc3VsdCkgPT4ge1xuICAgICAgICAgIGlmIChlcnJvcikgcmVqZWN0KG5ldyBFcnJvcihlcnJvcikpXG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdClcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSxcblxuXG4gICAgIHJldHVybkJvb2tEYXRhOiAoaWQpID0+IHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoJ1VQREFURSBib29rcyBTRVQgc3RhdHVzID0gPyBXSEVSRSBpZCA9ID8nLCBbMiwgaWRdLCAoZXJyb3IsIHJlc3VsdCkgPT4ge1xuICAgICAgICAgIGlmIChlcnJvcikgcmVqZWN0KG5ldyBFcnJvcihlcnJvcikpXG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdClcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSxcblxuICAgIGFkZEJvcnJvd0Jvb2s6IChkYXRhKSA9PiB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoJ0lOU0VSVCBJTlRPIGJvcnJvd3MgU0VUID8nLCBkYXRhLCAoZXJyb3IsIHJlc3VsdCkgPT4ge1xuICAgICAgICAgIGlmIChlcnJvcikgcmVqZWN0KG5ldyBFcnJvcihlcnJvcikpXG4gICAgICAgICAgICByZXNvbHZlKHJlc3VsdClcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfSxcblxuXG4gICAgZGVsZXRlQm9va0RhdGE6IChpZCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29ubmVjdGlvbi5xdWVyeSgnREVMRVRFIEZST00gYm9va3MgV0hFUkUgaWQgPSA/JywgaWQsIChlcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgaWYgKGVycm9yKSByZWplY3QobmV3IEVycm9yKGVycm9yKSlcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG5cblxufTsiXX0=