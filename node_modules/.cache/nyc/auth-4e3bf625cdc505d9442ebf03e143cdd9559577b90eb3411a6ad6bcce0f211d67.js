function cov_229gp6phib(){var path="/home/programmer/arkademy/minggu1/ninja-library-app/src/middleware/auth.js";var hash="e63da637662bbeda929e48aab5f5adbf2c054882";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/programmer/arkademy/minggu1/ninja-library-app/src/middleware/auth.js",statementMap:{"0":{start:{line:1,column:12},end:{line:1,column:35}},"1":{start:{line:2,column:15},end:{line:2,column:42}},"2":{start:{line:4,column:0},end:{line:21,column:1}},"3":{start:{line:6,column:22},end:{line:6,column:51}},"4":{start:{line:11,column:8},end:{line:19,column:10}},"5":{start:{line:12,column:12},end:{line:18,column:13}},"6":{start:{line:13,column:17},end:{line:13,column:79}},"7":{start:{line:15,column:16},end:{line:15,column:38}},"8":{start:{line:16,column:16},end:{line:16,column:47}},"9":{start:{line:17,column:16},end:{line:17,column:22}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:5,column:19},end:{line:5,column:20}},loc:{start:{line:5,column:48},end:{line:20,column:5}},line:5},"1":{name:"(anonymous_1)",decl:{start:{line:11,column:47},end:{line:11,column:48}},loc:{start:{line:11,column:66},end:{line:19,column:9}},line:11}},branchMap:{"0":{loc:{start:{line:12,column:12},end:{line:18,column:13}},type:"if",locations:[{start:{line:12,column:12},end:{line:18,column:13}},{start:{line:12,column:12},end:{line:18,column:13}}],line:12},"1":{loc:{start:{line:12,column:16},end:{line:12,column:106}},type:"binary-expr",locations:[{start:{line:12,column:16},end:{line:12,column:21}},{start:{line:12,column:25},end:{line:12,column:59}},{start:{line:12,column:63},end:{line:12,column:68}},{start:{line:12,column:72},end:{line:12,column:106}}],line:12}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0,0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e63da637662bbeda929e48aab5f5adbf2c054882"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_229gp6phib=function(){return actualCoverage;};}return actualCoverage;}cov_229gp6phib();const jwt=(cov_229gp6phib().s[0]++,require('jsonwebtoken'));const helper=(cov_229gp6phib().s[1]++,require('../helpers/index'));cov_229gp6phib().s[2]++;module.exports={authorization:(request,response,next)=>{cov_229gp6phib().f[0]++;const token=(cov_229gp6phib().s[3]++,request.headers.authorization);// const userId = request.headers['user-id']
// const token = authHeader.split(' ')[1];
cov_229gp6phib().s[4]++;jwt.verify(token,process.env.JWT_KEY,(error,result)=>{cov_229gp6phib().f[1]++;cov_229gp6phib().s[5]++;if((cov_229gp6phib().b[1][0]++,error)&&(cov_229gp6phib().b[1][1]++,error.name==="TokenExpiredError")||(cov_229gp6phib().b[1][2]++,error)&&(cov_229gp6phib().b[1][3]++,error.name==="JsonWebTokenError")){cov_229gp6phib().b[0][0]++;cov_229gp6phib().s[6]++;return helper.customErrorResponse(response,401,error.name);}else{cov_229gp6phib().b[0][1]++;cov_229gp6phib().s[7]++;request.token=result;cov_229gp6phib().s[8]++;console.log(request.token.role);cov_229gp6phib().s[9]++;next();}});}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGguanMiXSwibmFtZXMiOlsiand0IiwicmVxdWlyZSIsImhlbHBlciIsIm1vZHVsZSIsImV4cG9ydHMiLCJhdXRob3JpemF0aW9uIiwicmVxdWVzdCIsInJlc3BvbnNlIiwibmV4dCIsInRva2VuIiwiaGVhZGVycyIsInZlcmlmeSIsInByb2Nlc3MiLCJlbnYiLCJKV1RfS0VZIiwiZXJyb3IiLCJyZXN1bHQiLCJuYW1lIiwiY3VzdG9tRXJyb3JSZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJyb2xlIl0sIm1hcHBpbmdzIjoiaWlFQWVZOzJGQWZaLEtBQU1BLENBQUFBLEdBQUcsMEJBQUdDLE9BQU8sQ0FBQyxjQUFELENBQVYsQ0FBVCxDQUNBLEtBQU1DLENBQUFBLE1BQU0sMEJBQUdELE9BQU8sQ0FBQyxrQkFBRCxDQUFWLENBQVosQyx3QkFFQUUsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQ2JDLGFBQWEsQ0FBRSxDQUFDQyxPQUFELENBQVVDLFFBQVYsQ0FBb0JDLElBQXBCLEdBQTZCLHlCQUN4QyxLQUFNQyxDQUFBQSxLQUFLLDBCQUFHSCxPQUFPLENBQUNJLE9BQVIsQ0FBZ0JMLGFBQW5CLENBQVgsQ0FDQTtBQUVBO0FBSndDLHdCQU14Q0wsR0FBRyxDQUFDVyxNQUFKLENBQVdGLEtBQVgsQ0FBa0JHLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxPQUE5QixDQUF1QyxDQUFDQyxLQUFELENBQVFDLE1BQVIsR0FBbUIsaURBQ3RELEdBQUksNEJBQUFELEtBQUssK0JBQUlBLEtBQUssQ0FBQ0UsSUFBTixHQUFlLG1CQUFuQixDQUFMLEVBQStDLDRCQUFBRixLQUFLLCtCQUFJQSxLQUFLLENBQUNFLElBQU4sR0FBZSxtQkFBbkIsQ0FBeEQsQ0FBK0Ysb0RBQzFGLE1BQU9mLENBQUFBLE1BQU0sQ0FBQ2dCLG1CQUFQLENBQTJCWCxRQUEzQixDQUFxQyxHQUFyQyxDQUEyQ1EsS0FBSyxDQUFDRSxJQUFqRCxDQUFQLENBQ0osQ0FGRCxJQUVPLG9EQUNIWCxPQUFPLENBQUNHLEtBQVIsQ0FBZ0JPLE1BQWhCLENBREcsd0JBRUhHLE9BQU8sQ0FBQ0MsR0FBUixDQUFZZCxPQUFPLENBQUNHLEtBQVIsQ0FBY1ksSUFBMUIsRUFGRyx3QkFHSGIsSUFBSSxHQUNQLENBQ0osQ0FSRCxFQVNILENBaEJZLENBQWpCIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJylcbmNvbnN0IGhlbHBlciA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvaW5kZXgnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBhdXRob3JpemF0aW9uOiAocmVxdWVzdCwgcmVzcG9uc2UsIG5leHQpID0+IHtcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXF1ZXN0LmhlYWRlcnMuYXV0aG9yaXphdGlvblxuICAgICAgICAvLyBjb25zdCB1c2VySWQgPSByZXF1ZXN0LmhlYWRlcnNbJ3VzZXItaWQnXVxuXG4gICAgICAgIC8vIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zcGxpdCgnICcpWzFdO1xuXG4gICAgICAgIGp3dC52ZXJpZnkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9LRVksIChlcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gXCJUb2tlbkV4cGlyZWRFcnJvclwiIHx8IGVycm9yICYmIGVycm9yLm5hbWUgPT09IFwiSnNvbldlYlRva2VuRXJyb3JcIil7XG4gICAgICAgICAgICAgICAgIHJldHVybiBoZWxwZXIuY3VzdG9tRXJyb3JSZXNwb25zZShyZXNwb25zZSwgNDAxLCAgZXJyb3IubmFtZSApXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlcXVlc3QudG9rZW4gPSByZXN1bHRcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXF1ZXN0LnRva2VuLnJvbGUpXG4gICAgICAgICAgICAgICAgbmV4dCgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufSJdfQ==